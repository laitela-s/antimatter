<!DOCTYPE html>
<html lang="ko" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>ê°•í™” ì‹œë®¬ë ˆì´í„°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>tailwind.config = { darkMode: 'class', theme: { extend: { colors: { slate: { 850: '#1e293b', 900: '#0f172a' } } } } }</script>
    <style>
        ::-webkit-scrollbar {
            width: 4px
        }

        ::-webkit-scrollbar-track {
            background: transparent
        }

        ::-webkit-scrollbar-thumb {
            background: #475569;
            border-radius: 4px
        }

        input::-webkit-outer-spin-button,
        input::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0
        }

        * {
            -webkit-tap-highlight-color: transparent
        }
    </style>
</head>

<body class="bg-slate-900 text-slate-100 min-h-screen pb-10">
    <div class="max-w-3xl mx-auto px-4 pt-6">
        <header class="mb-6 text-center">
            <h1
                class="text-2xl font-bold bg-gradient-to-r from-blue-400 to-indigo-500 bg-clip-text text-transparent mb-1">
                ê°•í™” ì‹œë®¬ë ˆì´í„° Pro</h1>
            <p class="text-xs text-slate-400"><span class="text-red-400 font-medium">âš ï¸</span> 5ê°• ì´ìƒ, ì˜µì…˜ ì¥ë¹„ ì „ìš©</p>
        </header>
        <div class="space-y-4 mb-8">
            <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700/50">
                <div class="px-5 py-3 border-b border-slate-700">
                    <h2 class="text-sm font-semibold text-purple-300">ğŸ›¡ï¸ ì¥ë¹„ ì •ë³´</h2>
                </div>
                <div class="p-5 grid grid-cols-2 gap-4">
                    <div><label class="block text-[10px] text-slate-400 mb-1">í˜„ì¬ ë‹¨ê³„</label><select id="enhance_level"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none appearance-none">
                            <option value="" disabled selected>ì„ íƒ</option>
                            <option value="5">5ê°•</option>
                            <option value="6">6ê°•</option>
                            <option value="7">7ê°•</option>
                            <option value="8">8ê°•</option>
                            <option value="9">9ê°•</option>
                        </select></div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">ë‚´êµ¬ë„</label><input id="durability"
                            type="number"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none"
                            placeholder="ì…ë ¥"></div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">ë ™ì œ</label><input id="equip" type="number"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none"
                            placeholder="ì˜ˆ: 70">
                        <p class="text-[9px] text-slate-500 mt-1">ê°•í™” ë¹„ìš© ê³„ì‚°ìš©</p>
                    </div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">íŠ¼íŠ¼í•œ ì¥ë¹„</label><select id="dur_flag"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none appearance-none">
                            <option value="" disabled selected>ì„ íƒ</option>
                            <option value="o">ì˜ˆ</option>
                            <option value="x">ì•„ë‹ˆì˜¤</option>
                        </select></div>
                </div>
            </div>
            <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700/50">
                <div class="px-5 py-3 border-b border-slate-700">
                    <h2 class="text-sm font-semibold text-green-300">ğŸ’ ì¬ë£Œ ë¹„ìš©</h2>
                </div>
                <div class="p-5 grid grid-cols-2 gap-4">
                    <div><label class="block text-[10px] text-slate-400 mb-1">ê°•í™”ì„ ëŒ€ë© (ì–µ)</label><input id="stone_bulk"
                            type="number" step="0.1"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none"
                            placeholder="ë¹„ìš©">
                        <p class="text-[9px] text-slate-500 mt-1">ì¬ë£Œë¹„ ê³„ì‚°ìš©</p>
                    </div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">ê°•ë ˆ (ë§Œ/ë ˆì•Œ)</label><input id="rea"
                            type="number" step="1"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none"
                            placeholder="ë‹¨ê°€">
                        <p class="text-[9px] text-slate-500 mt-1">ë³´í˜¸ì œ ë¹„ìš© ê³„ì‚°ìš©</p>
                    </div>
                </div>
            </div>
            <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700/50">
                <div class="px-5 py-3 border-b border-slate-700">
                    <h2 class="text-sm font-semibold text-blue-300">ğŸ’° íŒë§¤ ê°€ê²©</h2>
                </div>
                <div class="p-5 grid grid-cols-2 gap-4">
                    <div class="col-span-2">
                        <p class="text-[10px] text-slate-400 mb-3">ìµœì¢… ê²°ê³¼ë¬¼ íŒë§¤ê°€ (ê¸°ëŒ€ê°€ì¹˜ ì‚°ì¶œìš©)</p>
                    </div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">7ê°• (ì–µ)</label><input id="sale7"
                            type="number" step="0.1"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none">
                    </div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">8ê°• (ì–µ)</label><input id="sale8"
                            type="number" step="0.1"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none">
                    </div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">9ê°• (ì–µ)</label><input id="sale9"
                            type="number" step="0.1"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none">
                    </div>
                    <div><label class="block text-[10px] text-slate-400 mb-1">10ê°• (ì–µ)</label><input id="sale10"
                            type="number" step="0.1"
                            class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-2 text-sm outline-none">
                    </div>
                </div>
            </div>
            <div class="bg-slate-800 rounded-xl shadow-lg border border-slate-700/50">
                <div class="px-5 py-3 border-b border-slate-700">
                    <h2 class="text-sm font-semibold text-yellow-300">ğŸ“Š í˜„ì¬ ì‹œì„¸ (ì„ íƒ)</h2>
                </div>
                <div class="p-5"><label class="block text-[10px] text-slate-400 mb-1">í˜„ì¬ ì¥ë¹„ ì‹œì„¸ (ì–µ)</label><input
                        id="market_price" type="number" step="0.1"
                        class="text-white w-full bg-slate-900 border border-slate-600 rounded-lg px-3 py-3 text-sm outline-none"
                        placeholder="ì„ íƒ">
                    <p class="text-[9px] text-slate-500 mt-2">ROI ë¹„êµìš©<br><span class="text-yellow-500">â€» ì„ íƒì‚¬í•­</span></p>
                </div>
            </div>
            <div class="px-2">
                <div class="flex justify-between text-xs text-slate-400 mb-1"><span>ì‹œë®¬ë ˆì´ì…˜ íšŸìˆ˜</span><span
                        id="trials-label" class="text-slate-300 font-mono">200,000</span></div>
                <p class="text-[9px] text-slate-500 mb-2">ë†’ì„ìˆ˜ë¡ ì •í™•í•˜ë‚˜ ì‹œê°„ ì†Œìš”</p><input id="trials" type="range"
                    min="100000" max="1000000" step="10000" value="200000"
                    class="w-full h-2 bg-slate-700 rounded-lg accent-blue-500"
                    oninput="document.getElementById('trials-label').innerText=parseInt(this.value).toLocaleString()">
            </div>
            <button onclick="calculate()"
                class="w-full bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 text-white font-bold py-4 px-6 rounded-xl shadow-lg flex justify-center items-center gap-2"><svg
                    class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M13 10V3L4 14h7v7l9-11h-7z"></path>
                </svg>ë¶„ì„ ì‹œì‘</button>
        </div>
        <div id="result-container" class="hidden">
            <div class="bg-slate-800 rounded-xl p-5 shadow-xl border border-slate-700 relative">
                <div
                    class="bg-blue-500/10 border border-blue-500/20 rounded-lg p-3 mb-5 text-[11px] text-blue-200 flex gap-2 items-start leading-snug">
                    <svg class="w-4 h-4 shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p>ì‹œë®¬ë ˆì´ì…˜ íŠ¹ì„±ìƒ ë§¤ë²ˆ ë¯¸ì„¸í•œ í¸ì°¨ ë°œìƒ ê°€ëŠ¥</p>
                </div>
                <div id="roi-badge" class="hidden absolute top-0 right-0 m-5"></div>
                <h2 class="text-base font-bold mb-4 flex items-center gap-2">ğŸ“Š ë¶„ì„ ê²°ê³¼</h2>
                <div id="result-content" class="space-y-6"></div>
            </div>
        </div>
        <div id="loading" class="fixed inset-0 bg-slate-900/80 backdrop-blur-sm z-50" style="display:none">
            <div class="h-full flex flex-col items-center justify-center">
                <div class="w-12 h-12 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-4">
                </div>
                <p class="text-blue-400 font-medium">ë¶„ì„ ì¤‘...</p>
            </div>
        </div>
    </div>
    <script>
        const SR = [1, .9, .8, .7, .6, .5, .4, .3, .2, .1], SRD = [1, .92, .83, .75, .67, .58, .5, .42, .33, .25], SC = [1, 2, 3, 5, 10, 20, 30, 50, 100, 200], PC = [1, 2, 3, 4, 8, 10, 15, 20, 30, 50];
        function gold_cost(e, c) { let b; return b = e <= 69 ? Math.round(10 * e ** 2.5 / 10) * 10 : 70 === e ? 958000 : e >= 71 && e <= 79 ? 2e6 : 80 === e ? 3303400 : 90 === e ? 729e4 : Math.round(10 * e ** 2.5 / 10) * 10, b * 2 ** c }
        function sim_trial(l, d, t10, t9, t8, e, u, s, p, sale) { let cost = 0, cl = l, cd = d; while (cl < 10 && cd > cl) { let prot = cd >= 10 ? cl >= t10 : cd === 9 ? cl >= t9 : cd === 8 && cl >= t8, base = u ? SRD[cl] : SR[cl], eff = prot ? Math.min(base + .2, 1) : base; prot ? cost += PC[cl] * p : cost += gold_cost(e, cl) + SC[cl] * s, Math.random() < eff ? cl++ : prot ? cd-- : Math.random() < cl / 10 ? { finalLevel: 0, cost } : cd-- } return { finalLevel: cl, cost } }
        function sim_price(n, l, d, t10, t9, t8, e, u, s, p, sale) { let sum = 0; for (let i = 0; i < n; i++) { let r = sim_trial(l, d, t10, t9, t8, e, u, s, p, sale); sum += (r.finalLevel >= 7 ? (sale[r.finalLevel] || 0) - r.cost : -r.cost) } return sum / n }
        function sim_stats(n, l, d, t10, t9, t8, e, u, s, p) { let c = { 10: 0, 9: 0, 8: 0, 7: 0, 0: 0 }; for (let i = 0; i < n; i++) { let r = sim_trial(l, d, t10, t9, t8, e, u, s, p, {}); r.finalLevel >= 7 ? c[r.finalLevel] = (c[r.finalLevel] || 0) + 1 : c[0]++ } return { 10: c[10] / n * 100, 9: c[9] / n * 100, 8: c[8] / n * 100, 7: c[7] / n * 100 } }
        function format_gold(x) { let a = Math.abs(x), s = x < 0 ? "-" : ""; a = Math.round(a / 1e3) * 1e3; let o = Math.floor(a / 1e8), m = Math.floor(a % 1e8 / 1e4), p = []; return o && p.push(o + "ì–µ"), m && p.push(m + "ë§Œ"), p.length ? s + p.join(" ") : "0" }
        function saveInputs() { localStorage.setItem("enhancerInputsPro", JSON.stringify({ market_price: document.getElementById("market_price").value, sale7: document.getElementById("sale7").value, sale8: document.getElementById("sale8").value, sale9: document.getElementById("sale9").value, sale10: document.getElementById("sale10").value, enhance_level: document.getElementById("enhance_level").value, durability: document.getElementById("durability").value, stone_bulk: document.getElementById("stone_bulk").value, rea: document.getElementById("rea").value, equip: document.getElementById("equip").value, dur_flag: document.getElementById("dur_flag").value, trials: document.getElementById("trials").value })) }
        function loadInputs() { const i = JSON.parse(localStorage.getItem("enhancerInputsPro")); if (i) { document.getElementById("market_price").value = i.market_price || ""; document.getElementById("sale7").value = i.sale7 || ""; document.getElementById("sale8").value = i.sale8 || ""; document.getElementById("sale9").value = i.sale9 || ""; document.getElementById("sale10").value = i.sale10 || ""; document.getElementById("enhance_level").value = i.enhance_level || ""; document.getElementById("durability").value = i.durability || ""; document.getElementById("stone_bulk").value = i.stone_bulk || ""; document.getElementById("rea").value = i.rea || ""; document.getElementById("equip").value = i.equip || ""; document.getElementById("dur_flag").value = i.dur_flag || ""; document.getElementById("trials").value = i.trials || "200000" } }
        document.addEventListener("DOMContentLoaded", loadInputs); document.querySelectorAll("input,select").forEach(e => e.addEventListener("input", saveInputs));
        function calculate() { saveInputs(); document.getElementById("loading").style.display = "block"; document.getElementById("result-container").classList.add("hidden"); setTimeout(() => { const mp = parseFloat(document.getElementById("market_price").value) * 1e8 || 0, s7 = parseFloat(document.getElementById("sale7").value) * 1e8 || 0, s8 = parseFloat(document.getElementById("sale8").value) * 1e8 || 0, s9 = parseFloat(document.getElementById("sale9").value) * 1e8 || 0, s10 = parseFloat(document.getElementById("sale10").value) * 1e8 || 0, sb = parseFloat(document.getElementById("stone_bulk").value) * 1e8 || 0, r = parseFloat(document.getElementById("rea").value) * 1e4 || 0, eq = parseFloat(document.getElementById("equip").value) || 0, ds = document.getElementById("dur_flag").value?.trim().toLowerCase(), tr = parseInt(document.getElementById("trials").value) || 200000; let sale = { 7: s7, 8: s8, 9: s9, 10: s10 }, cl = parseInt(document.getElementById("enhance_level").value), id = parseInt(document.getElementById("durability").value); if (isNaN(cl) || cl < 5 || isNaN(id) || !ds) { alert("ëª¨ë“  í•„ìˆ˜ í•­ëª©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”"); document.getElementById("loading").style.display = "none"; return } let su = sb / 400, pf = 10 * r, ud = ds === 'o', fev = 0, bst = "", c10 = 100, c9 = 100, c8 = 100, sef = true; if (id <= 8) { fev = sim_price(tr, cl, id, 100, 100, 100, eq, ud, su, pf, sale), bst = `<div class="text-sm text-slate-300">ë‚´êµ¬ë„ ë‚®ìŒ (<span class="text-red-400 font-bold">${id}</span>)</div><div class="text-lg font-bold text-white mt-1">ê¹¡ê°•í™” ì¶”ì²œ</div>` } else { let defs = [100, 100, 100], params = { 10: { ub: 10, idx: 0 }, 9: { ub: 9, idx: 1 }, 8: { ub: 8, idx: 2 } }; for (let dur of [10, 9, 8]) { if (id < dur) continue; let { ub, idx } = params[dur], lb = -1e99, lc = null; for (let ca = cl; ca < ub; ca++) { defs[idx] = ca; let exp = sim_price(tr, cl, id, defs[0], defs[1], defs[2], eq, ud, su, pf, sale); exp > lb && (lb = exp, lc = ca) } let en = sim_price(tr, cl, id, ...defs.slice(0, idx), 100, ...defs.slice(idx + 1), eq, ud, su, pf, sale); en > lb && (lb = en, lc = null), defs[idx] = lc || 100 } c10 = defs[0], c9 = defs[1], c8 = defs[2]; if (cl <= 7 && id >= 8 && s7 > 0 && s8 > 0) { let sa7 = s7, tf8 = sim_price(tr, 7, 8, c10, c9, c8, eq, ud, su, pf, sale); if (sa7 > tf8) { sef = false, fev = sa7, bst = `<div class="text-sm text-slate-300">7ê°•/ë‚´êµ¬8 ìƒíƒœ</div><div class="text-lg font-bold text-red-400 mt-1">âš ï¸ 8ê°• ì‹œë„ ë¹„ê¶Œì¥</div><div class="text-xs text-slate-400 mt-2">7ê°• íŒë§¤ê°€ ìœ ë¦¬<br>(8ê°• ì‹œë„ ì‹œ: ${format_gold(tf8)})</div>` } } if (sef) { fev = sim_price(tr, cl, id, c10, c9, c8, eq, ud, su, pf, sale); let ss = []; id >= 10 && ss.push(c10 === 100 ? '<span class="text-slate-400">ë‚´êµ¬10+:</span> <strong>ë¯¸ì‚¬ìš©</strong>' : `<span class="text-slate-400">ë‚´êµ¬10+:</span> <strong class="text-blue-400">${c10}ê°•</strong>ë¶€í„°`), id >= 9 && ss.push(c9 === 100 ? '<span class="text-slate-400">ë‚´êµ¬9:</span> <strong>ë¯¸ì‚¬ìš©</strong>' : `<span class="text-slate-400">ë‚´êµ¬9:</span> <strong class="text-blue-400">${c9}ê°•</strong>ë¶€í„°`), id >= 8 && ss.push(c8 === 100 ? '<span class="text-slate-400">ë‚´êµ¬8:</span> <strong>ë¯¸ì‚¬ìš©</strong>' : `<span class="text-slate-400">ë‚´êµ¬8:</span> <strong class="text-blue-400">${c8}ê°•</strong>ë¶€í„°`), bst = `<div class="space-y-1 text-sm bg-slate-700/50 p-3 rounded-lg border border-slate-600">${ss.map(s => `<div>${s}</div>`).join('')}</div>` } } let pr; pr = !sef && cl === 7 ? { 10: 0, 9: 0, 8: 0, 7: 100 } : sim_stats(tr, cl, id, c10, c9, c8, eq, ud, su, pf); let rb = ""; if (mp > 0) { let g = fev - mp, ig = g > 0, pc = Math.abs(g) / mp * 100; rb = `<div class="px-3 py-1 rounded-full text-xs font-bold border ${ig ? 'bg-green-500/20 text-green-400 border-green-500/50' : 'bg-red-500/20 text-red-400 border-red-500/50'}">${ig ? 'â–² ì´ë“' : 'â–¼ ì†í•´'} ${pc.toFixed(1)}%</div>` } const rc = `<div class="grid grid-cols-1 md:grid-cols-2 gap-6"><div class="bg-indigo-900/20 p-4 rounded-xl border border-indigo-500/30"><div class="text-xs text-indigo-300 mb-1">ê¶Œì¥ ì „ëµ</div>${bst}<div class="mt-4 pt-4 border-t border-indigo-500/30"><div class="text-xs text-slate-400">ìµœì¢… ê¸°ëŒ€ìˆ˜ìµ</div><div class="text-2xl font-bold text-yellow-400">${format_gold(fev)}</div><div class="text-[10px] text-slate-500 mt-1">* ìˆœìˆ˜ìµ</div></div></div><div class="space-y-3"><div class="text-xs text-slate-400 mb-2">ìµœì¢… ë„ë‹¬ í™•ë¥ </div>${[10, 9, 8, 7].map(lv => { let p = pr[lv], col = lv === 10 ? 'bg-yellow-500' : lv === 9 ? 'bg-purple-500' : 'bg-red-500'; return `<div class="relative pt-1"><div class="flex justify-between text-xs mb-1"><span class="font-bold text-slate-300">${lv}ê°•</span><span class="text-slate-400">${p.toFixed(2)}%</span></div><div class="h-2 flex rounded bg-slate-700"><div style="width:${p}%" class="${col}"></div></div></div>` }).join('')}<div class="text-[10px] text-slate-500 text-right">ë‚˜ë¨¸ì§€ ${Math.max(0, 100 - (pr[10] + pr[9] + pr[8] + pr[7])).toFixed(2)}% íŒŒê´´</div></div></div>`; document.getElementById("roi-badge").innerHTML = rb; document.getElementById("roi-badge").classList.remove("hidden"); document.getElementById("result-content").innerHTML = rc; document.getElementById("result-container").classList.remove("hidden"); document.getElementById("loading").style.display = "none"; window.innerWidth < 768 && document.getElementById("result-container").scrollIntoView({ behavior: 'smooth' }) }, 500) }
    </script>
</body>

</html>
